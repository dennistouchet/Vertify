<template name="fix">
  <section class="right_col" role="main" style="height:900px;">
    <div class="row">
      <h1 class="page_title">Fix</h1>
      <div id="addErrAlign" class="alert alert-danger" style="display:none;"></div>
      {{#if hasObjects}}
        {{#if complete}}
          {{> fixcomplete}}
        {{else}}
          {{> fixincomplete}}
        {{/if}}
      {{else}}
        {{> fixinvalid}}
      {{/if}}
    </div>
  </section>
</template>

<template name="fixinvalid">
  <div class="row">
    <div class="col-md-12">
      <h4 style="padding-left:10px">Looks like you do not have any Vertify Objects that need to be fix.</h4>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12">
      <h4 style="padding-left:10px">You must have at least one Vertify Object with Analysis enabled to run fix.
      </h4>
    </div>
  </div>
  <div class="row">
    <div class="col-md-3">
      <button class="btn btn-primary toAnalyze" type=button style="margin-top:10px;margin-left:10px;">
        Analyze
      </button>
    </div>
    <div class="col-md-3">
    </div>
    <div class="col-md-3">
    </div>
    <div class="col-md-3">
    </div>
  </div>
</template>

<template name="fixincomplete">
  <div class="row">
    <div class="col-md-12">
      <h4 style="padding-left:10px">Looks like you have issues and/or unmatched records within your data.</h4>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12">
      <h4 style="padding-left:10px">Select a Vertify object to fix.
      </h4>
    </div>
  </div>
  {{>fixvertifyobjecttable}}
</template>

<template name="fixvertifyobjecttable">
  <div class="row" style="border-bottom: 1px solid lightgrey">
    <div class="x_panel">
      <div class="col-md-3">Vertify Object </div>
      <div class="col-md-2">Total </div>
      <div class="col-md-1">Matched </div>
      <div class="col-md-1">Issues </div>
      <div class="col-md-1">Vertified </div>
      <div class="col-md-1">Unmatched </div>
      <div class="col-md-3" style="text-align:right;">Actions </div>
    </div>
    <div>
      {{#if Template.subscriptionsReady}}
        {{#each vertify_objects}}
          {{> fixvertifyobjectrow}}
        {{/each}}
      {{/if}}
    </div>
  </div>
</template>

<template name="fixvertifyobjectrow">
  <div class="row" style="padding-left:20px; padding-right:20px; padding-bottom:10px;">
    <div class="col-md-3">{{name}} </div>
    <div class="col-md-2" >
      {{getRecordCountVo _id}}<br/>
    </div>
    <div class="col-md-1">
      {{getRecordCountEo _id}}<br/>
    </div>
    <div class="col-md-1">
      {{getIssuesCount _id}}<br/>
    </div>
    <div class="col-md-1">
      {{getVertifiedCount _id}}<br/>
    </div>
    <div class="col-md-1">
       {{getUnmatchedCount _id}}<br/>
    </div>
    <div class="col-md-3">
      <div class="dropdown" style="display:inline-block; float:right;">
        <button class="btn btn-primary dropdown-toggle voddlbtn" type="button" data-toggle="dropdown" >
          Options
        <span class="caret"></span></button>
        <ul class="dropdown-menu dropdown-menu-right voddl">
          <li><a data-id="{{id}}" href="#"> View Details</a></li>
        </ul>
      </div>
    </div>
  </div>
</template>
